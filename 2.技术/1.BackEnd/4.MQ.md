# MQ

消息队列 MQ		阿里云产品，按量付费版和铂金版，分布式事务
Apache RocketMQ	阿里开源
消息队列 Kafka	阿里云产品，日志收集中心
Apache Kafka	开源
RabbitMQ		开源，使用Erlang编写

activeMQ
zeroMQ

如何保证消息一定发出去？
发起端（客户端）保证成功，幂等

订单成功回调：
开启事务
处理业务
MQ
事务提交 >> 假如这里失败了，MQ 已经发出，会造成错误消息，而如果 MQ 放到事务提交之后，又存在 MQ 生成失败，导致业务丢失的问题；

简单处理：
支付成功状态	发送状态

通知状态：0 未通知；1：通知中（这个好像用处不大）；3通知成功；3通知失败；

有定时器检查：
超过5s 以上的，0 未通知、1：通知中

## 

tcc 使用场景是消耗多个资源的情况下。


订单状态 成功时间

do do do first:succ

MQ ：解耦；异步任务；一处生产，多处消费，互不干扰；削峰填谷。
